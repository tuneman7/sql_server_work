{
   "servers": {
      "mssql": {
         "mssql1": {
            "dbs": {
               "products": {
                  "schemas": {
                     "dbo": {
                        "tables": {
                           "dbo.product_type.sql": "/data/school/MIDS/sql_server_work/dbs/servers/mssql/mssql1/dbs/products/schemas/dbo/tables/dbo.product_type.sql",
                           "dbo.product_type.sql_content": "use products;\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[product_type]') AND type in (N'U'))\nDROP TABLE [dbo].[product_type]\nGO\nSET ANSI_NULLS ON\nGO\nSET QUOTED_IDENTIFIER ON\nGO\nCREATE TABLE [dbo].[product_type](\n\t[id] [int] IDENTITY(1,1) NOT NULL,\n\t[product_type] [char](100) NULL,\n\t[create_dt] [datetime] default GETDATE(),\n\t[created_by] [char](100) default SYSTEM_USER,\n\t[update_dt] [datetime] NULL,\n\t[updated_by] [char](100) NULL\n) ON [PRIMARY]\nGO\nALTER TABLE [dbo].[product_type] ADD PRIMARY KEY CLUSTERED \n(\n\t[id] ASC\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]\nGO\n\n-- Create a trigger on the 'product_type' table\nCREATE TRIGGER tr_ProductType_Update\nON product_type\nAFTER UPDATE\nAS\nBEGIN\n\n    -- Update the 'update_dt' field with the current date and time\n    UPDATE product_type\n    SET update_dt = GETDATE(),\n    updated_by = SYSTEM_USER\n    FROM product_type pt\n    INNER JOIN inserted i ON pt.id = i.id\nEND;\n",
                           "dbo.products.sql": "/data/school/MIDS/sql_server_work/dbs/servers/mssql/mssql1/dbs/products/schemas/dbo/tables/dbo.products.sql",
                           "dbo.products.sql_content": "use products;\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[products]') AND type in (N'U'))\nDROP TABLE [dbo].[products]\ngo\nSET ANSI_NULLS ON\nGO\nSET QUOTED_IDENTIFIER ON\nGO\nCREATE TABLE [dbo].[products](\n\t[id] [int] IDENTITY(1,1) NOT NULL,\n\t[product_name] [varchar](100) NULL,\n\t[product_type] [int] NULL,\n\t[created_by] [char](100) NULL,\n\t[created_dt] [datetime] NULL,\n\t[updated_by] [char](100) NULL,\n\t[updated_dt] [datetime] NULL,\n\tparent_product_id int NULL\n) ON [PRIMARY]\nGO\nALTER TABLE [dbo].[products] ADD PRIMARY KEY CLUSTERED \n(\n\t[id] ASC\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]\nGO\nALTER TABLE [dbo].[products] ADD  DEFAULT (getdate()) FOR [created_dt]\nGO\nALTER TABLE products\nADD CONSTRAINT FK_ProductType\nFOREIGN KEY (product_type)\nREFERENCES product_type(id);\ngo\nSET ANSI_NULLS ON\nGO\nSET QUOTED_IDENTIFIER ON\nGO\n-- Create the trigger to update updated_dt\nCREATE TRIGGER [dbo].[UpdateProducts]\nON [dbo].[products]\nAFTER UPDATE\nAS\nBEGIN\n    UPDATE products\n    SET updated_dt = GETDATE(),\n\tupdated_by = system_user\n    FROM products\n    INNER JOIN inserted ON products.id = inserted.id;\nEND;\nGO\nALTER TABLE [dbo].[products] ENABLE TRIGGER [UpdateProducts]\nGO\n",
                           "dbo.product_price_history.sql": "/data/school/MIDS/sql_server_work/dbs/servers/mssql/mssql1/dbs/products/schemas/dbo/tables/dbo.product_price_history.sql",
                           "dbo.product_price_history.sql_content": "use products;\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[product_price_history]') AND type in (N'U'))\nDROP TABLE [dbo].[product_price_history]\ngo\nSET ANSI_NULLS ON\nGO\nSET QUOTED_IDENTIFIER ON\nGO\nCREATE TABLE [dbo].[product_price_history](\n\t[id] [int] IDENTITY(1,1) NOT NULL,\n\tproduct_id int not null,\n\tusd_price money not null,\n\t[pricing_start_dt] [datetime] not NULL,\n\t[pricing_end_dt] [datetime] not NULL,\n\t[created_by] [char](100) NULL DEFAULT system_user,\n\t[created_dt] [datetime] NULL default getdate(),\n\t[updated_by] [char](100) NULL,\n\t[updated_dt] [datetime] NULL\n) ON [PRIMARY]\nGO\nALTER TABLE [dbo].[product_price_history] ADD PRIMARY KEY CLUSTERED \n(\n\t[id] ASC\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]\nGO\nALTER TABLE product_price_history\nADD CONSTRAINT FK_product_price_history_product\nFOREIGN KEY (product_id)\nREFERENCES products(id);\ngo\nSET ANSI_NULLS ON\nGO\nSET QUOTED_IDENTIFIER ON\nGO\n-- Create the trigger to update updated_dt\nCREATE TRIGGER [dbo].[Updateproduct_price_history]\nON [dbo].[product_price_history]\nAFTER UPDATE\nAS\nBEGIN\n    UPDATE product_price_history\n    SET updated_dt = GETDATE(),\n\tupdated_by = system_user\n    FROM product_price_history\n    INNER JOIN inserted ON product_price_history.id = inserted.id;\nEND;\nGO\nALTER TABLE [dbo].[product_price_history] ENABLE TRIGGER [Updateproduct_price_history]\nGO\n",
                           "dbo.product_price.sql": "/data/school/MIDS/sql_server_work/dbs/servers/mssql/mssql1/dbs/products/schemas/dbo/tables/dbo.product_price.sql",
                           "dbo.product_price.sql_content": "use products;\nIF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[product_price]') AND type in (N'U'))\nDROP TABLE [dbo].[product_price]\ngo\nSET ANSI_NULLS ON\nGO\nSET QUOTED_IDENTIFIER ON\nGO\nCREATE TABLE [dbo].[product_price](\n\t[id] [int] IDENTITY(1,1) NOT NULL,\n\tproduct_id int not null,\n\tusd_price money not null,\n\t[pricing_start_dt] [datetime] not NULL,\n\t[pricing_end_dt] [datetime] not NULL,\n\t[created_by] [char](100) NULL DEFAULT system_user,\n\t[created_dt] [datetime] NULL default getdate(),\n\t[updated_by] [char](100) NULL,\n\t[updated_dt] [datetime] NULL\n) ON [PRIMARY]\nGO\nALTER TABLE [dbo].[product_price] ADD PRIMARY KEY CLUSTERED \n(\n\t[id] ASC\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]\nGO\nALTER TABLE product_price\nADD CONSTRAINT FK_product_price_product\nFOREIGN KEY (product_id)\nREFERENCES products(id);\ngo\nSET ANSI_NULLS ON\nGO\nSET QUOTED_IDENTIFIER ON\nGO\n-- Create the trigger to update updated_dt\nCREATE TRIGGER [dbo].[Updateproduct_price]\nON [dbo].[product_price]\nAFTER UPDATE\nAS\nBEGIN\n    UPDATE product_price\n    SET updated_dt = GETDATE(),\n\tupdated_by = system_user\n    FROM product_price\n    INNER JOIN inserted ON product_price.id = inserted.id;\nEND;\nGO\nALTER TABLE [dbo].[product_price] ENABLE TRIGGER [Updateproduct_price]\nGO\n"
                        }
                     }
                  },
                  "create_db": {
                     "create_db.sql": "/data/school/MIDS/sql_server_work/dbs/servers/mssql/mssql1/dbs/products/create_db/create_db.sql",
                     "create_db.sql_content": "CREATE DATABASE products;\n"
                  }
               }
            }
         }
      },
      "postsql": {
         "postsql1": {
            "dbs": {
               "finance": {
                  "schemas": {
                     "public": {
                        "tables": {
                           "geography.sql": "/data/school/MIDS/sql_server_work/dbs/servers/postsql/postsql1/dbs/finance/schemas/public/tables/geography.sql",
                           "geography.sql_content": "-- Connect to the \"finance\" database (if not already connected)\n\\c finance\n\n-- Create the \"geography\" table with columns\nCREATE TABLE geography (\n    id serial PRIMARY KEY,\n    zipcode VARCHAR(10),\n    country VARCHAR(100),\n    county VARCHAR(100),\n    msa VARCHAR(100),\n    -- Add more columns as needed\n    created_by CHAR(100),\n    created_dt TIMESTAMP DEFAULT current_timestamp,\n    updated_by CHAR(100),\n    updated_dt TIMESTAMP\n);\n\n-- Create a trigger function to update created_by, created_dt, updated_by, and updated_dt on any insert or update\nCREATE OR REPLACE FUNCTION update_geography()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF TG_OP = 'INSERT' THEN\n        NEW.created_by = current_user;\n        NEW.created_dt = current_timestamp;\n    ELSIF TG_OP = 'UPDATE' THEN\n        NEW.updated_by = current_user;\n        NEW.updated_dt = current_timestamp;\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Create a trigger on insert or update of any column\nCREATE TRIGGER geography_insert_update_trigger\nBEFORE INSERT OR UPDATE ON geography\nFOR EACH ROW\nEXECUTE FUNCTION update_geography();\n",
                           "gl_accounts.sql": "/data/school/MIDS/sql_server_work/dbs/servers/postsql/postsql1/dbs/finance/schemas/public/tables/gl_accounts.sql",
                           "gl_accounts.sql_content": "-- Connect to the finance database\n\\c finance\n\n-- Create the gl_accounts table\nCREATE TABLE gl_accounts (\n    account_id serial PRIMARY KEY,\n    account_name VARCHAR(255) NOT NULL,\n    account_type VARCHAR(50) NOT NULL,\n    account_balance NUMERIC(10, 2) DEFAULT 0.00,\n    created_by CHAR(100),\n    created_dt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_by CHAR(100),\n    updated_dt TIMESTAMP\n);\n\n-- Create a trigger function to update updated_by and updated_dt on any column update\nCREATE OR REPLACE FUNCTION update_gl_accounts()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_by = current_user;\n    NEW.updated_dt = current_timestamp;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Create a trigger on update of any column\nCREATE TRIGGER gl_accounts_update_trigger\nBEFORE UPDATE ON gl_accounts\nFOR EACH ROW\nEXECUTE FUNCTION update_gl_accounts();"
                        }
                     }
                  },
                  "create_db": {
                     "create_db.sql": "/data/school/MIDS/sql_server_work/dbs/servers/postsql/postsql1/dbs/finance/create_db/create_db.sql",
                     "create_db.sql_content": "CREATE DATABASE finance;"
                  }
               }
            }
         }
      },
      "mysql": {
         "mysql1": {
            "dbs": {
               "customers": {
                  "schemas": {
                     "customers": {
                        "tables": {
                           "customer_info.sql": "/data/school/MIDS/sql_server_work/dbs/servers/mysql/mysql1/dbs/customers/schemas/customers/tables/customer_info.sql",
                           "customer_info.sql_content": "DROP TABLE IF EXISTS customers.customer_info;\n\nCREATE TABLE customers.customer_info (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    f_name CHAR(100),\n    l_name CHAR(100),\n    email_address CHAR(200),\n    created_by CHAR(100),\n    created_dt DATETIME DEFAULT CURRENT_TIMESTAMP,\n    updated_by CHAR(100),\n    updated_dt DATETIME\n);\n\n\nUSE customers;\n\nDELIMITER //\n\nCREATE TRIGGER customers_before_update\nBEFORE UPDATE ON customers.customer_info FOR EACH ROW\nBEGIN\n    SET NEW.updated_by = CURRENT_USER();\n    SET NEW.updated_dt = CURRENT_TIMESTAMP;    \nEND;\n\n//\n\nDELIMITER ;\n\nDELIMITER //\n\nCREATE TRIGGER customers_insert_trigger\nBEFORE INSERT ON customers.customer_info\nFOR EACH ROW\nBEGIN\n    SET NEW.created_by = CURRENT_USER();\nEND;\n\n//\n\nDELIMITER ;\n",
                           "customer_product.sql": "/data/school/MIDS/sql_server_work/dbs/servers/mysql/mysql1/dbs/customers/schemas/customers/tables/customer_product.sql",
                           "customer_product.sql_content": "DROP TABLE IF EXISTS customers.customer_product;\n\nCREATE TABLE customers.customer_product (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    product_id INT,\n    customer_id INT,\n    product_type CHAR(100),\n    created_by CHAR(100),\n    created_dt DATETIME DEFAULT CURRENT_TIMESTAMP,\n    updated_by CHAR(100),\n    updated_dt DATETIME,\n    expiration_dt DATETIME\n);\n\n\nUSE customers;\n\nDELIMITER //\n\nCREATE TRIGGER customer_product_before_update\nBEFORE UPDATE ON customers.customer_product FOR EACH ROW\nBEGIN\n    SET NEW.updated_by = CURRENT_USER();\n    SET NEW.updated_dt = CURRENT_TIMESTAMP;    \nEND;\n\n//\n\nDELIMITER ;\n\nDELIMITER //\n\nCREATE TRIGGER customer_product_insert_trigger\nBEFORE INSERT ON customers.customer_product\nFOR EACH ROW\nBEGIN\n    SET NEW.created_by = CURRENT_USER();\nEND;\n\n//\n\nDELIMITER ;\n",
                           "customer_product_history.sql": "/data/school/MIDS/sql_server_work/dbs/servers/mysql/mysql1/dbs/customers/schemas/customers/tables/customer_product_history.sql",
                           "customer_product_history.sql_content": "DROP TABLE IF EXISTS customers.customer_product_history;\n\nCREATE TABLE customers.customer_product_history (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    product_id INT,\n    customer_id INT,\n    product_type CHAR(100),\n    created_by CHAR(100),\n    created_dt DATETIME DEFAULT CURRENT_TIMESTAMP,\n    updated_by CHAR(100),\n    updated_dt DATETIME,\n    expiration_dt DATETIME\n);\n\n\nUSE customers;\n\nDELIMITER //\n\nCREATE TRIGGER customer_product_history_before_update\nBEFORE UPDATE ON customers.customer_product_history FOR EACH ROW\nBEGIN\n    SET NEW.updated_by = CURRENT_USER();\n    SET NEW.updated_dt = CURRENT_TIMESTAMP;    \nEND;\n\n//\n\nDELIMITER ;\n\nDELIMITER //\n\nCREATE TRIGGER customer_product_history_insert_trigger\nBEFORE INSERT ON customers.customer_product_history\nFOR EACH ROW\nBEGIN\n    SET NEW.created_by = CURRENT_USER();\nEND;\n\n//\n\nDELIMITER ;\n"
                        }
                     }
                  },
                  "create_db": {
                     "create_db.sql": "/data/school/MIDS/sql_server_work/dbs/servers/mysql/mysql1/dbs/customers/create_db/create_db.sql",
                     "create_db.sql_content": "CREATE DATABASE customers;"
                  }
               }
            }
         }
      }
   }
}